{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nexport function useLocalStorage(key, initialValue) {\n  _s();\n  // 获取初始值\n  const [storedValue, setStoredValue] = useState(() => {\n    try {\n      const item = window.localStorage.getItem(key);\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      console.error(error);\n      return initialValue;\n    }\n  });\n\n  // 监听其他标签页的更改\n  useEffect(() => {\n    const handleStorageChange = e => {\n      if (e.key === key) {\n        try {\n          setStoredValue(e.newValue ? JSON.parse(e.newValue) : initialValue);\n        } catch (error) {\n          console.error(error);\n        }\n      }\n    };\n    window.addEventListener('storage', handleStorageChange);\n    return () => window.removeEventListener('storage', handleStorageChange);\n  }, [key, initialValue]);\n\n  // 更新存储的值\n  const setValue = value => {\n    try {\n      const valueToStore = value instanceof Function ? value(storedValue) : value;\n      setStoredValue(valueToStore);\n      window.localStorage.setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  return [storedValue, setValue];\n}\n_s(useLocalStorage, \"CNhZxQbxYOyslLkU5SGkvIZlGUQ=\");","map":{"version":3,"names":["useState","useEffect","useLocalStorage","key","initialValue","_s","storedValue","setStoredValue","item","window","localStorage","getItem","JSON","parse","error","console","handleStorageChange","e","newValue","addEventListener","removeEventListener","setValue","value","valueToStore","Function","setItem","stringify"],"sources":["/Users/zakzak/Desktop/video_pub/video-publisher/src/components/hooks/useLocalStorage.js"],"sourcesContent":["import { useState, useEffect } from 'react';\n\nexport function useLocalStorage(key, initialValue) {\n  // 获取初始值\n  const [storedValue, setStoredValue] = useState(() => {\n    try {\n      const item = window.localStorage.getItem(key);\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      console.error(error);\n      return initialValue;\n    }\n  });\n\n  // 监听其他标签页的更改\n  useEffect(() => {\n    const handleStorageChange = (e) => {\n      if (e.key === key) {\n        try {\n          setStoredValue(e.newValue ? JSON.parse(e.newValue) : initialValue);\n        } catch (error) {\n          console.error(error);\n        }\n      }\n    };\n\n    window.addEventListener('storage', handleStorageChange);\n    return () => window.removeEventListener('storage', handleStorageChange);\n  }, [key, initialValue]);\n\n  // 更新存储的值\n  const setValue = (value) => {\n    try {\n      const valueToStore = value instanceof Function ? value(storedValue) : value;\n      setStoredValue(valueToStore);\n      window.localStorage.setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return [storedValue, setValue];\n}"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAE3C,OAAO,SAASC,eAAeA,CAACC,GAAG,EAAEC,YAAY,EAAE;EAAAC,EAAA;EACjD;EACA,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGP,QAAQ,CAAC,MAAM;IACnD,IAAI;MACF,MAAMQ,IAAI,GAAGC,MAAM,CAACC,YAAY,CAACC,OAAO,CAACR,GAAG,CAAC;MAC7C,OAAOK,IAAI,GAAGI,IAAI,CAACC,KAAK,CAACL,IAAI,CAAC,GAAGJ,YAAY;IAC/C,CAAC,CAAC,OAAOU,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACpB,OAAOV,YAAY;IACrB;EACF,CAAC,CAAC;;EAEF;EACAH,SAAS,CAAC,MAAM;IACd,MAAMe,mBAAmB,GAAIC,CAAC,IAAK;MACjC,IAAIA,CAAC,CAACd,GAAG,KAAKA,GAAG,EAAE;QACjB,IAAI;UACFI,cAAc,CAACU,CAAC,CAACC,QAAQ,GAAGN,IAAI,CAACC,KAAK,CAACI,CAAC,CAACC,QAAQ,CAAC,GAAGd,YAAY,CAAC;QACpE,CAAC,CAAC,OAAOU,KAAK,EAAE;UACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;QACtB;MACF;IACF,CAAC;IAEDL,MAAM,CAACU,gBAAgB,CAAC,SAAS,EAAEH,mBAAmB,CAAC;IACvD,OAAO,MAAMP,MAAM,CAACW,mBAAmB,CAAC,SAAS,EAAEJ,mBAAmB,CAAC;EACzE,CAAC,EAAE,CAACb,GAAG,EAAEC,YAAY,CAAC,CAAC;;EAEvB;EACA,MAAMiB,QAAQ,GAAIC,KAAK,IAAK;IAC1B,IAAI;MACF,MAAMC,YAAY,GAAGD,KAAK,YAAYE,QAAQ,GAAGF,KAAK,CAAChB,WAAW,CAAC,GAAGgB,KAAK;MAC3Ef,cAAc,CAACgB,YAAY,CAAC;MAC5Bd,MAAM,CAACC,YAAY,CAACe,OAAO,CAACtB,GAAG,EAAES,IAAI,CAACc,SAAS,CAACH,YAAY,CAAC,CAAC;IAChE,CAAC,CAAC,OAAOT,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;IACtB;EACF,CAAC;EAED,OAAO,CAACR,WAAW,EAAEe,QAAQ,CAAC;AAChC;AAAChB,EAAA,CAxCeH,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}