{"ast":null,"code":"var _jsxFileName = \"/Users/zakzak/Desktop/video_pub/video-publisher/src/components/SettingsView.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Save, RefreshCw } from 'lucide-react';\nimport { validateDropboxConfig } from '../utils/validators';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SettingsView = ({\n  dropboxConfig,\n  setDropboxConfig\n}) => {\n  _s();\n  const [status, setStatus] = useState({\n    testing: false,\n    saving: false,\n    success: null,\n    message: ''\n  });\n  const testConnection = async () => {\n    const errors = validateDropboxConfig(dropboxConfig);\n    if (Object.keys(errors).length > 0) {\n      setStatus({\n        testing: false,\n        saving: false,\n        success: false,\n        message: '请填写所有必填字段'\n      });\n      return;\n    }\n    setStatus({\n      ...status,\n      testing: true,\n      message: ''\n    });\n    try {\n      // 模拟API测试\n      await new Promise(resolve => setTimeout(resolve, 1500));\n      setStatus({\n        testing: false,\n        saving: false,\n        success: true,\n        message: 'Dropbox API 连接成功！'\n      });\n    } catch (error) {\n      setStatus({\n        testing: false,\n        saving: false,\n        success: false,\n        message: error.message || '连接失败，请检查配置。'\n      });\n    }\n  };\n  const handleSave = async () => {\n    const errors = validateDropboxConfig(dropboxConfig);\n    if (Object.keys(errors).length > 0) {\n      setStatus({\n        testing: false,\n        saving: false,\n        success: false,\n        message: '请填写所有必填字段'\n      });\n      return;\n    }\n    setStatus({\n      ...status,\n      saving: true,\n      message: ''\n    });\n    try {\n      // 模拟保存操作\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      setStatus({\n        testing: false,\n        saving: false,\n        success: true,\n        message: '配置保存成功！'\n      });\n    } catch (error) {\n      setStatus({\n        testing: false,\n        saving: false,\n        success: false,\n        message: '保存失败，请重试。'\n      });\n    }\n  };\n  const fields = [{\n    key: 'apiKey',\n    label: 'API Key',\n    required: true\n  }, {\n    key: 'apiSecret',\n    label: 'API Secret',\n    required: true\n  }, {\n    key: 'accessToken',\n    label: 'Access Token',\n    required: true\n  }, {\n    key: 'refreshToken',\n    label: 'Refresh Token',\n    required: true\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-6 rounded-lg shadow\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-xl font-bold mb-4\",\n      children: \"Dropbox \\u914D\\u7F6E\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-4\",\n      children: [fields.map(field => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"label\",\n          children: [field.label, field.required && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-red-500 ml-1\",\n            children: \"*\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 34\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          className: `input ${!dropboxConfig[field.key] && status.success === false ? 'border-red-300' : ''}`,\n          value: dropboxConfig[field.key],\n          onChange: e => setDropboxConfig({\n            ...dropboxConfig,\n            [field.key]: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this)]\n      }, field.key, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `btn btn-secondary flex items-center ${status.testing ? 'opacity-50 cursor-not-allowed' : ''}`,\n          onClick: testConnection,\n          disabled: status.testing || status.saving,\n          children: status.testing ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(RefreshCw, {\n              className: \"w-4 h-4 animate-spin mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 17\n            }, this), \"\\u6D4B\\u8BD5\\u4E2D...\"]\n          }, void 0, true) : '测试连接'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `btn btn-primary flex items-center ${status.saving ? 'opacity-50 cursor-not-allowed' : ''}`,\n          onClick: handleSave,\n          disabled: status.testing || status.saving,\n          children: status.saving ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(RefreshCw, {\n              className: \"w-4 h-4 animate-spin mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 17\n            }, this), \"\\u4FDD\\u5B58\\u4E2D...\"]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Save, {\n              className: \"w-4 h-4 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 17\n            }, this), \"\\u4FDD\\u5B58\\u914D\\u7F6E\"]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this), status.message && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `p-4 rounded ${status.success ? 'bg-green-50 text-green-700' : 'bg-red-50 text-red-700'}`,\n        children: status.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n};\n_s(SettingsView, \"GN4MQeZ7jyHi8xeMBqGXLW7NJwg=\");\n_c = SettingsView;\nexport default SettingsView;\nvar _c;\n$RefreshReg$(_c, \"SettingsView\");","map":{"version":3,"names":["React","useState","Save","RefreshCw","validateDropboxConfig","jsxDEV","_jsxDEV","Fragment","_Fragment","SettingsView","dropboxConfig","setDropboxConfig","_s","status","setStatus","testing","saving","success","message","testConnection","errors","Object","keys","length","Promise","resolve","setTimeout","error","handleSave","fields","key","label","required","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","field","type","value","onChange","e","target","onClick","disabled","_c","$RefreshReg$"],"sources":["/Users/zakzak/Desktop/video_pub/video-publisher/src/components/SettingsView.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Save, RefreshCw } from 'lucide-react';\nimport { validateDropboxConfig } from '../utils/validators';\n\nconst SettingsView = ({ dropboxConfig, setDropboxConfig }) => {\n  const [status, setStatus] = useState({\n    testing: false,\n    saving: false,\n    success: null,\n    message: ''\n  });\n\n  const testConnection = async () => {\n    const errors = validateDropboxConfig(dropboxConfig);\n    if (Object.keys(errors).length > 0) {\n      setStatus({\n        testing: false,\n        saving: false,\n        success: false,\n        message: '请填写所有必填字段'\n      });\n      return;\n    }\n\n    setStatus({ ...status, testing: true, message: '' });\n    try {\n      // 模拟API测试\n      await new Promise(resolve => setTimeout(resolve, 1500));\n      setStatus({\n        testing: false,\n        saving: false,\n        success: true,\n        message: 'Dropbox API 连接成功！'\n      });\n    } catch (error) {\n      setStatus({\n        testing: false,\n        saving: false,\n        success: false,\n        message: error.message || '连接失败，请检查配置。'\n      });\n    }\n  };\n\n  const handleSave = async () => {\n    const errors = validateDropboxConfig(dropboxConfig);\n    if (Object.keys(errors).length > 0) {\n      setStatus({\n        testing: false,\n        saving: false,\n        success: false,\n        message: '请填写所有必填字段'\n      });\n      return;\n    }\n\n    setStatus({ ...status, saving: true, message: '' });\n    try {\n      // 模拟保存操作\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      setStatus({\n        testing: false,\n        saving: false,\n        success: true,\n        message: '配置保存成功！'\n      });\n    } catch (error) {\n      setStatus({\n        testing: false,\n        saving: false,\n        success: false,\n        message: '保存失败，请重试。'\n      });\n    }\n  };\n\n  const fields = [\n    { key: 'apiKey', label: 'API Key', required: true },\n    { key: 'apiSecret', label: 'API Secret', required: true },\n    { key: 'accessToken', label: 'Access Token', required: true },\n    { key: 'refreshToken', label: 'Refresh Token', required: true }\n  ];\n\n  return (\n    <div className=\"bg-white p-6 rounded-lg shadow\">\n      <h2 className=\"text-xl font-bold mb-4\">Dropbox 配置</h2>\n      <div className=\"space-y-4\">\n        {fields.map(field => (\n          <div key={field.key}>\n            <label className=\"label\">\n              {field.label}\n              {field.required && <span className=\"text-red-500 ml-1\">*</span>}\n            </label>\n            <input\n              type=\"password\"\n              className={`input ${\n                !dropboxConfig[field.key] && status.success === false\n                  ? 'border-red-300'\n                  : ''\n              }`}\n              value={dropboxConfig[field.key]}\n              onChange={e => setDropboxConfig({\n                ...dropboxConfig,\n                [field.key]: e.target.value\n              })}\n            />\n          </div>\n        ))}\n        \n        <div className=\"flex gap-2\">\n          <button\n            className={`btn btn-secondary flex items-center ${\n              status.testing ? 'opacity-50 cursor-not-allowed' : ''\n            }`}\n            onClick={testConnection}\n            disabled={status.testing || status.saving}\n          >\n            {status.testing ? (\n              <>\n                <RefreshCw className=\"w-4 h-4 animate-spin mr-2\" />\n                测试中...\n              </>\n            ) : (\n              '测试连接'\n            )}\n          </button>\n          <button\n            className={`btn btn-primary flex items-center ${\n              status.saving ? 'opacity-50 cursor-not-allowed' : ''\n            }`}\n            onClick={handleSave}\n            disabled={status.testing || status.saving}\n          >\n            {status.saving ? (\n              <>\n                <RefreshCw className=\"w-4 h-4 animate-spin mr-2\" />\n                保存中...\n              </>\n            ) : (\n              <>\n                <Save className=\"w-4 h-4 mr-2\" />\n                保存配置\n              </>\n            )}\n          </button>\n        </div>\n\n        {status.message && (\n          <div className={`p-4 rounded ${\n            status.success ? 'bg-green-50 text-green-700' : 'bg-red-50 text-red-700'\n          }`}>\n            {status.message}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SettingsView;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,IAAI,EAAEC,SAAS,QAAQ,cAAc;AAC9C,SAASC,qBAAqB,QAAQ,qBAAqB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE5D,MAAMC,YAAY,GAAGA,CAAC;EAAEC,aAAa;EAAEC;AAAiB,CAAC,KAAK;EAAAC,EAAA;EAC5D,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGb,QAAQ,CAAC;IACnCc,OAAO,EAAE,KAAK;IACdC,MAAM,EAAE,KAAK;IACbC,OAAO,EAAE,IAAI;IACbC,OAAO,EAAE;EACX,CAAC,CAAC;EAEF,MAAMC,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjC,MAAMC,MAAM,GAAGhB,qBAAqB,CAACM,aAAa,CAAC;IACnD,IAAIW,MAAM,CAACC,IAAI,CAACF,MAAM,CAAC,CAACG,MAAM,GAAG,CAAC,EAAE;MAClCT,SAAS,CAAC;QACRC,OAAO,EAAE,KAAK;QACdC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE,KAAK;QACdC,OAAO,EAAE;MACX,CAAC,CAAC;MACF;IACF;IAEAJ,SAAS,CAAC;MAAE,GAAGD,MAAM;MAAEE,OAAO,EAAE,IAAI;MAAEG,OAAO,EAAE;IAAG,CAAC,CAAC;IACpD,IAAI;MACF;MACA,MAAM,IAAIM,OAAO,CAACC,OAAO,IAAIC,UAAU,CAACD,OAAO,EAAE,IAAI,CAAC,CAAC;MACvDX,SAAS,CAAC;QACRC,OAAO,EAAE,KAAK;QACdC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE,IAAI;QACbC,OAAO,EAAE;MACX,CAAC,CAAC;IACJ,CAAC,CAAC,OAAOS,KAAK,EAAE;MACdb,SAAS,CAAC;QACRC,OAAO,EAAE,KAAK;QACdC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE,KAAK;QACdC,OAAO,EAAES,KAAK,CAACT,OAAO,IAAI;MAC5B,CAAC,CAAC;IACJ;EACF,CAAC;EAED,MAAMU,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC7B,MAAMR,MAAM,GAAGhB,qBAAqB,CAACM,aAAa,CAAC;IACnD,IAAIW,MAAM,CAACC,IAAI,CAACF,MAAM,CAAC,CAACG,MAAM,GAAG,CAAC,EAAE;MAClCT,SAAS,CAAC;QACRC,OAAO,EAAE,KAAK;QACdC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE,KAAK;QACdC,OAAO,EAAE;MACX,CAAC,CAAC;MACF;IACF;IAEAJ,SAAS,CAAC;MAAE,GAAGD,MAAM;MAAEG,MAAM,EAAE,IAAI;MAAEE,OAAO,EAAE;IAAG,CAAC,CAAC;IACnD,IAAI;MACF;MACA,MAAM,IAAIM,OAAO,CAACC,OAAO,IAAIC,UAAU,CAACD,OAAO,EAAE,IAAI,CAAC,CAAC;MACvDX,SAAS,CAAC;QACRC,OAAO,EAAE,KAAK;QACdC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE,IAAI;QACbC,OAAO,EAAE;MACX,CAAC,CAAC;IACJ,CAAC,CAAC,OAAOS,KAAK,EAAE;MACdb,SAAS,CAAC;QACRC,OAAO,EAAE,KAAK;QACdC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE,KAAK;QACdC,OAAO,EAAE;MACX,CAAC,CAAC;IACJ;EACF,CAAC;EAED,MAAMW,MAAM,GAAG,CACb;IAAEC,GAAG,EAAE,QAAQ;IAAEC,KAAK,EAAE,SAAS;IAAEC,QAAQ,EAAE;EAAK,CAAC,EACnD;IAAEF,GAAG,EAAE,WAAW;IAAEC,KAAK,EAAE,YAAY;IAAEC,QAAQ,EAAE;EAAK,CAAC,EACzD;IAAEF,GAAG,EAAE,aAAa;IAAEC,KAAK,EAAE,cAAc;IAAEC,QAAQ,EAAE;EAAK,CAAC,EAC7D;IAAEF,GAAG,EAAE,cAAc;IAAEC,KAAK,EAAE,eAAe;IAAEC,QAAQ,EAAE;EAAK,CAAC,CAChE;EAED,oBACE1B,OAAA;IAAK2B,SAAS,EAAC,gCAAgC;IAAAC,QAAA,gBAC7C5B,OAAA;MAAI2B,SAAS,EAAC,wBAAwB;MAAAC,QAAA,EAAC;IAAU;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACtDhC,OAAA;MAAK2B,SAAS,EAAC,WAAW;MAAAC,QAAA,GACvBL,MAAM,CAACU,GAAG,CAACC,KAAK,iBACflC,OAAA;QAAA4B,QAAA,gBACE5B,OAAA;UAAO2B,SAAS,EAAC,OAAO;UAAAC,QAAA,GACrBM,KAAK,CAACT,KAAK,EACXS,KAAK,CAACR,QAAQ,iBAAI1B,OAAA;YAAM2B,SAAS,EAAC,mBAAmB;YAAAC,QAAA,EAAC;UAAC;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1D,CAAC,eACRhC,OAAA;UACEmC,IAAI,EAAC,UAAU;UACfR,SAAS,EAAE,SACT,CAACvB,aAAa,CAAC8B,KAAK,CAACV,GAAG,CAAC,IAAIjB,MAAM,CAACI,OAAO,KAAK,KAAK,GACjD,gBAAgB,GAChB,EAAE,EACL;UACHyB,KAAK,EAAEhC,aAAa,CAAC8B,KAAK,CAACV,GAAG,CAAE;UAChCa,QAAQ,EAAEC,CAAC,IAAIjC,gBAAgB,CAAC;YAC9B,GAAGD,aAAa;YAChB,CAAC8B,KAAK,CAACV,GAAG,GAAGc,CAAC,CAACC,MAAM,CAACH;UACxB,CAAC;QAAE;UAAAP,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACJ,CAAC;MAAA,GAjBME,KAAK,CAACV,GAAG;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAkBd,CACN,CAAC,eAEFhC,OAAA;QAAK2B,SAAS,EAAC,YAAY;QAAAC,QAAA,gBACzB5B,OAAA;UACE2B,SAAS,EAAE,uCACTpB,MAAM,CAACE,OAAO,GAAG,+BAA+B,GAAG,EAAE,EACpD;UACH+B,OAAO,EAAE3B,cAAe;UACxB4B,QAAQ,EAAElC,MAAM,CAACE,OAAO,IAAIF,MAAM,CAACG,MAAO;UAAAkB,QAAA,EAEzCrB,MAAM,CAACE,OAAO,gBACbT,OAAA,CAAAE,SAAA;YAAA0B,QAAA,gBACE5B,OAAA,CAACH,SAAS;cAAC8B,SAAS,EAAC;YAA2B;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,yBAErD;UAAA,eAAE,CAAC,GAEH;QACD;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACK,CAAC,eACThC,OAAA;UACE2B,SAAS,EAAE,qCACTpB,MAAM,CAACG,MAAM,GAAG,+BAA+B,GAAG,EAAE,EACnD;UACH8B,OAAO,EAAElB,UAAW;UACpBmB,QAAQ,EAAElC,MAAM,CAACE,OAAO,IAAIF,MAAM,CAACG,MAAO;UAAAkB,QAAA,EAEzCrB,MAAM,CAACG,MAAM,gBACZV,OAAA,CAAAE,SAAA;YAAA0B,QAAA,gBACE5B,OAAA,CAACH,SAAS;cAAC8B,SAAS,EAAC;YAA2B;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,yBAErD;UAAA,eAAE,CAAC,gBAEHhC,OAAA,CAAAE,SAAA;YAAA0B,QAAA,gBACE5B,OAAA,CAACJ,IAAI;cAAC+B,SAAS,EAAC;YAAc;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,4BAEnC;UAAA,eAAE;QACH;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACK,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,EAELzB,MAAM,CAACK,OAAO,iBACbZ,OAAA;QAAK2B,SAAS,EAAE,eACdpB,MAAM,CAACI,OAAO,GAAG,4BAA4B,GAAG,wBAAwB,EACvE;QAAAiB,QAAA,EACArB,MAAM,CAACK;MAAO;QAAAiB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACZ,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAAC1B,EAAA,CAzJIH,YAAY;AAAAuC,EAAA,GAAZvC,YAAY;AA2JlB,eAAeA,YAAY;AAAC,IAAAuC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}